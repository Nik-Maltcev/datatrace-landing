# ๐ง ะัะฟัะฐะฒะปะตะฝะธะต ะพัะธะฑะบะธ 404 "Unexpected token <!DOCTYPE"

## ๐จ ะัะพะฑะปะตะผะฐ
```
Failed to load resource: the server responded with a status of 404
Registration error: SyntaxError: Unexpected token <!DOCTYPE... is not valid JSON
```

## ๐ ะัะธัะธะฝะฐ
ะคัะพะฝัะตะฝะด ะฟััะฐะตััั ะพะฑัะฐัะธัััั ะบ API ะฟะพ ะพัะฝะพัะธัะตะปัะฝะพะผั ะฟััะธ `/api/auth/signup`, ะฝะพ ะฟะพะปััะฐะตั HTML ัััะฐะฝะธัั 404 ะฒะผะตััะพ JSON ะพัะฒะตัะฐ.

## โ ะะตัะตะฝะธะต

### 1. ะะฑะฝะพะฒะธัะต ะบะพะด (ัะถะต ัะดะตะปะฐะฝะพ)
ะั ะพะฑะฝะพะฒะธะปะธ ะบะพะด ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฐะฑัะพะปััะฝัั URL ัะตัะตะท `@/lib/api.ts`.

### 2. ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

#### ะะฐัะธะฐะฝั A: ะะฐะทะดะตะปัะฝัะต ะฟัะพะตะบัั ะฒ Railway (ัะตะบะพะผะตะฝะดัะตััั)

**ะกะพะทะดะฐะนัะต 2 ะฟัะพะตะบัะฐ ะฒ Railway:**

1. **API ะฟัะพะตะบั** (`apps/api`):
   ```bash
   NODE_ENV=production
   PORT=3000
   FRONTEND_URL=https://your-frontend.railway.app
   SUPABASE_URL=https://your-project.supabase.co
   SUPABASE_ANON_KEY=your_anon_key
   SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
   ```

2. **Frontend ะฟัะพะตะบั** (`apps/web`):
   ```bash
   NEXT_PUBLIC_API_URL=https://your-api.railway.app
   ```

#### ะะฐัะธะฐะฝั B: ะะดะธะฝ ะฟัะพะตะบั (ะตัะปะธ ัะพัะธัะต ะฒัะต ะฒ ะพะดะฝะพะผ)

**ะะฐัััะพะนัะต railway.json ะดะปั ะพะฑัะปัะถะธะฒะฐะฝะธั ะธ API ะธ ััะพะฝัะตะฝะดะฐ:**
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "npm install && cd apps/api && npm install && cd ../web && npm install && npm run build"
  },
  "deploy": {
    "startCommand": "cd apps/api && npm start",
    "healthcheckPath": "/",
    "healthcheckTimeout": 100
  }
}
```

### 3. ะัะพะฒะตัััะต ะฝะฐัััะพะนะบะธ

#### ะ Railway Dashboard:
1. **Variables** โ ัะฑะตะดะธัะตัั, ััะพ ะฒัะต ะฟะตัะตะผะตะฝะฝัะต ะดะพะฑะฐะฒะปะตะฝั
2. **Deployments** โ ะฟัะพะฒะตัััะต ะปะพะณะธ ัะฑะพัะบะธ
3. **Settings** โ ะฟัะพะฒะตัััะต ะดะพะผะตะฝั

#### ะขะตััะธัะพะฒะฐะฝะธะต:
```bash
# ะัะพะฒะตัััะต API ะฝะฐะฟััะผัั
curl https://your-api.railway.app/api/auth/signup \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123","name":"Test","phone":"+7999123456"}'

# ะัะพะฒะตัััะต ััะพะฝัะตะฝะด
curl https://your-frontend.railway.app/
```

## ๐๏ธ Troubleshooting

### โ API ะฒะพะทะฒัะฐัะฐะตั 404
**ะัะพะฒะตัััะต:**
- ะัะฐะฒะธะปัะฝะพ ะปะธ ะฝะฐัััะพะตะฝ `railway.json` ะธะปะธ `railway.toml`
- ะะฐะฟััะบะฐะตััั ะปะธ API ัะตัะฒะตั ะฝะฐ ะฟัะฐะฒะธะปัะฝะพะผ ะฟะพััั
- ะะพัััะฟะตะฝ ะปะธ endpoint `/api/auth/signup`

**ะะตัะตะฝะธะต:**
```bash
# ะัะพะฒะตัััะต ะปะพะณะธ ะฒ Railway Dashboard
# ะฃะฑะตะดะธัะตัั, ััะพ ัะตัะฒะตั ัะปััะฐะตั PORT ะธะท ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
```

### โ CORS ะพัะธะฑะบะธ
**ะัะพะฒะตัััะต:**
- ะะฐัััะพะตะฝ ะปะธ CORS ะฒ API ะดะปั ััะพะฝัะตะฝะด ะดะพะผะตะฝะฐ
- ะัะฐะฒะธะปัะฝะพ ะปะธ ัะบะฐะทะฐะฝ `FRONTEND_URL` ะฒ API ะฟัะพะตะบัะต

**ะะตัะตะฝะธะต:**
```javascript
// ะ apps/api/src/index.js ะดะพะปะถะฝะพ ะฑััั:
app.use(cors({
  origin: process.env.FRONTEND_URL || 'http://localhost:3000',
  credentials: true
}));
```

### โ ะะตัะตะผะตะฝะฝัะต ะฝะต ะทะฐะณััะถะฐัััั
**ะัะพะฒะตัััะต:**
- ะะพะฑะฐะฒะปะตะฝั ะปะธ ะฟะตัะตะผะตะฝะฝัะต ะฒ Railway Dashboard
- ะัะฐะฒะธะปัะฝะพ ะปะธ ะฝะฐะทะฒะฐะฝั ะฟะตัะตะผะตะฝะฝัะต (ั ะฟัะตัะธะบัะพะผ `NEXT_PUBLIC_` ะดะปั ััะพะฝัะตะฝะดะฐ)
- ะกะดะตะปะฐะฝ ะปะธ redeploy ะฟะพัะปะต ะดะพะฑะฐะฒะปะตะฝะธั ะฟะตัะตะผะตะฝะฝัั

## ๐ฏ ะััััะพะต ัะตัะตะฝะธะต

1. **ะกะพะทะดะฐะนัะต 2 ะฟัะพะตะบัะฐ ะฒ Railway**
2. **API ะฟัะพะตะบั:** ะฟะพะดะบะปััะธัะต ะฟะฐะฟะบั `apps/api`
3. **Frontend ะฟัะพะตะบั:** ะฟะพะดะบะปััะธัะต ะฟะฐะฟะบั `apps/web`
4. **ะะพะฑะฐะฒััะต ะฟะตัะตะผะตะฝะฝัะต** ะบะฐะบ ัะบะฐะทะฐะฝะพ ะฒััะต
5. **ะะฑะฝะพะฒะธัะต URLs** ะฟะพัะปะต ะดะตะฟะปะพั
6. **ะขะตััะธััะนัะต** ัะตะณะธัััะฐัะธั

## โ ะัะพะฒะตัะบะฐ ััะฟะตัะฝะพััะธ

ะะพัะปะต ะธัะฟัะฐะฒะปะตะฝะธั ะฒั ะดะพะปะถะฝั ัะฒะธะดะตัั:
- โ ะคัะพะฝัะตะฝะด ะทะฐะณััะถะฐะตััั ะฑะตะท ะพัะธะฑะพะบ
- โ ะคะพัะผะฐ ัะตะณะธัััะฐัะธะธ ะพัะฟัะฐะฒะปัะตััั ััะฟะตัะฝะพ
- โ ะะพะปััะฐะตัะต JSON ะพัะฒะตั ะพั API
- โ ะะพะปัะทะพะฒะฐัะตะปั ัะพะทะดะฐะตััั ะฒ Supabase

---

**ะะพัะพะฒะพ!** ๐ ะัะธะฑะบะฐ 404 ะดะพะปะถะฝะฐ ะฑััั ะธัะฟัะฐะฒะปะตะฝะฐ.